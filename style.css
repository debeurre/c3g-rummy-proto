/* Color Theme Variables - Edit these to change the entire color scheme! */
:root {
  /* Primary accent colors - Autumn palette */
  --color-accent: #c85a3e;        /* burnt sienna - headings, buttons, important elements */
  --color-accent-hover: #a84832;  /* darker burnt sienna for hover states */
  --color-success: #8b9556;       /* olive green - player indicators, success states */
  --color-success-hover: #6f7845; /* darker olive for hover states */
  --color-warning: #d4a574;       /* warm tan/ochre - selection highlights, scores */
  --color-primary: #2d5a7b;       /* navy blue - primary accent for player identification */

  /* Player colors for identification */
  --color-player-alice: #c65d47;  /* warm terracotta */
  --color-player-bob: #7fa650;    /* sage green */
  --color-player-charlie: #457ca5; /* lighter blue */
  --color-player-dana: #d4a574;   /* golden tan */

  /* Background colors (darkest to lightest) - warm earthy tones */
  --color-bg-darkest: #2a2520;    /* dark charcoal brown body background */
  --color-bg-dark: #3a342e;       /* warm dark brown panels, modals */
  --color-bg-medium: #4a4035;     /* medium brown nested sections, opponent cards */
  --color-bg-medium-hover: #5a4f42; /* lighter medium brown for hover */
  --color-bg-light: #524539;      /* light brown selected/hover states */
  --color-bg-disabled: #5a5450;   /* muted brown disabled button background */
  --color-bg-winner: #3d4a35;     /* mossy green winner row highlight */

  /* Text colors */
  --color-text-primary: #e8ddd0;  /* warm cream main text */
  --color-text-secondary: #a89984; /* muted tan muted text, labels */

  /* Card colors */
  --color-card-face: #FAF6EF;        /* cream - card face background */
  --color-card-red: #ca0321;         /* red - hearts and diamonds */
  --color-card-back-start: #d4915e;  /* amber gradient start */
  --color-card-back-end: #a87e3a;    /* brass gradient end */

  /* Sort button colors */
  --color-sort-btn: #a87e3a;         /* brass - sort button base */
  --color-sort-btn-hover: #8a6830;   /* darker brass - sort button hover */
}

/* Reset and base styles */
* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

body {
  font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
  background: var(--color-bg-darkest);
  color: var(--color-text-primary);
  overflow: hidden;
}

#app {
  display: flex;
  flex-direction: column;
  height: 100vh;
}

/* Header */
header {
  background: var(--color-bg-dark);
  padding: 1rem 2rem;
  border-bottom: 2px solid var(--color-bg-medium);
  display: flex;
  justify-content: space-between;
  align-items: center;
}

header h1 {
  font-size: 1.5rem;
  color: var(--color-accent);
}

#game-info {
  display: flex;
  gap: 2rem;
  font-size: 0.9rem;
}

#game-info span {
  background: var(--color-bg-medium);
  padding: 0.5rem 1rem;
  border-radius: 4px;
}

/* Main layout */
main {
  flex: 1;
  display: grid;
  grid-template-columns: 1fr 350px;
  gap: 1rem;
  padding: 1rem;
  overflow: hidden;
}

/* Sidebars */
aside {
  background: var(--color-bg-dark);
  border-radius: 8px;
  padding: 1rem;
  overflow-y: auto;
  position: relative;
  z-index: 1100; /* Above modals */
}

aside h2 {
  font-size: 1.1rem;
  margin-bottom: 1rem;
  color: var(--color-accent);
}

/* Game log */
#game-log {
  font-family: 'Courier New', monospace;
  font-size: 1rem;
  max-height: calc(100vh - 180px);
  overflow-y: auto;
}

#game-log .log-entry {
  margin-bottom: 0.5rem;
  padding: 0.25rem;
}

#game-log .log-player {
  color: var(--color-success);
}

#game-log .log-ai {
  color: var(--color-text-secondary);
}

#game-log .log-score {
  color: var(--color-warning);
}

#game-log .log-error {
  color: var(--color-accent);
}

/* Game board */
#game-board {
  background: var(--color-bg-dark);
  border-radius: 8px;
  padding: 1.5rem;
  display: flex;
  flex-direction: column;
  gap: 1rem;
  overflow-y: auto;
  position: relative;
}

/* Opponents */
#opponents {
  display: flex;
  gap: 1rem;
  justify-content: space-around;
}

.opponent {
  background: var(--color-bg-medium);
  padding: 0.75rem;
  border-radius: 6px;
  min-width: 150px;
}

.opponent h4 {
  margin-bottom: 0.5rem;
  color: var(--color-accent);
}

/* Player name colors */
.opponent[data-player="alice"] h4,
#player-info-compact[data-player="alice"] #player-name {
  color: var(--color-player-alice);
}

.opponent[data-player="bob"] h4,
#player-info-compact[data-player="bob"] #player-name {
  color: var(--color-player-bob);
}

.opponent[data-player="charlie"] h4,
#player-info-compact[data-player="charlie"] #player-name {
  color: var(--color-player-charlie);
}

.opponent[data-player="dana"] h4,
#player-info-compact[data-player="dana"] #player-name {
  color: var(--color-player-dana);
}

.opponent-stats {
  font-size: 0.85rem;
  display: flex;
  flex-direction: column;
  gap: 0.25rem;
}

.opponent-upgrades {
  display: flex;
  flex-wrap: wrap;
  gap: 0.25rem;
  margin-top: 0.5rem;
  justify-content: flex-start;
  font-size: 0.8rem;
}

.opponent-hand {
  display: flex;
  gap: 2px;
  margin-top: 0.5rem;
}

.opponent-card {
  width: 20px;
  height: 28px;
  background: var(--color-success);
  border: 1px solid var(--color-bg-dark);
  border-radius: 2px;
}

/* Table melds */
#table-melds {
  background: var(--color-bg-medium);
  padding: 1rem;
  border-radius: 6px;
  min-height: 100px;
}

#table-melds h3 {
  font-size: 1rem;
  margin-bottom: 0.75rem;
  color: var(--color-accent);
  text-align: center;
}

#melds-container {
  display: flex;
  flex-wrap: wrap;
  gap: 0.5rem;
  justify-content: center;
}

.meld {
  background: var(--color-bg-darkest);
  padding: 0.4rem 0.6rem;
  border-radius: 4px;
  display: inline-flex;
  align-items: center;
  gap: 0.4rem;
  white-space: nowrap;
  border: 2px solid var(--color-bg-medium); /* Default brown border */
  transition: border-color 0.2s;
}

.meld-owner {
  font-size: 0.75rem;
  color: var(--color-text-secondary);
}

.meld-cards-compact {
  display: inline-flex;
  gap: 0.25rem;
  align-items: center;
}

.meld-card {
  background: var(--color-card-face);
  padding: 0.1rem 0.3rem;
  border-radius: 3px;
  font-size: 0.85rem;
  font-weight: 500;
  border: 1px solid rgba(0, 0, 0, 0.2);
}

/* Card suit colors in melds */
.meld-card.suit-s,
.meld-card.suit-c {
  color: #000;
}

.meld-card.suit-h,
.meld-card.suit-d {
  color: var(--color-card-red);
}

/* Layoff indicator - add brackets */
.meld-card-layoff {
  border-color: var(--color-success);
  border-width: 2px;
}

.meld.selectable {
  cursor: pointer;
}

.meld.selectable:hover {
  border-color: var(--color-success);
}

.meld.selected {
  border-color: var(--color-warning);
  background: var(--color-bg-light);
}

/* Piles and Status */
#piles-and-status {
  display: grid;
  grid-template-columns: 1fr auto 1fr;
  gap: 50px;
  align-items: center;
  padding: 1rem 0;
}

#player-info-compact {
  background: var(--color-bg-medium);
  padding: 0.75rem 1rem;
  border-radius: 6px;
  min-width: 200px;
  display: flex;
  flex-direction: column;
  gap: 0.5rem;
  align-self: center;
  justify-self: end;
}

#player-info-compact h3 {
  color: var(--color-success);
  margin: 0;
}

#player-info-compact span {
  font-size: 1rem;
  line-height: 1.4;
}

#piles {
  display: flex;
  gap: 2rem;
  justify-content: center;
}

.pile {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 0.5rem;
  flex-shrink: 0; /* Prevent shrinking */
  position: relative;
}

.pile span {
  font-size: 0.85rem;
  color: var(--color-text-secondary);
}

.view-pile-btn {
  font-size: 0.75rem;
  padding: 0.25rem 0.5rem;
  margin-bottom: 0.25rem;
  background: var(--color-bg-medium);
  color: var(--color-text-secondary);
  border: 1px solid var(--color-bg-light);
}

.view-pile-btn:hover {
  background: var(--color-bg-medium-hover);
  color: var(--color-text-primary);
}

.discard-area {
  position: relative;
  width: 70px;
  height: 100px;
}

.discard-placeholder {
  position: absolute;
  top: 0;
  left: 0;
  width: 70px;
  height: 100px;
  border-radius: 6px;
  border: 6px dashed var(--color-text-secondary);
  background: transparent;
  display: flex;
  align-items: center;
  justify-content: center;
  pointer-events: none; /* Let clicks pass through to card layer */
  z-index: 0;
}

.discard-placeholder span {
  font-size: 0.65rem;
  color: var(--color-text-secondary);
  text-align: center;
  line-height: 1.1;
  word-spacing: 100vw; /* Force each word to new line */
}

.discard-card-slot {
  position: absolute;
  top: 0;
  left: 0;
  width: 70px;
  height: 100px;
  z-index: 1;
  cursor: pointer;
}

/* Discard pile viewer overlay */
.discard-viewer {
  position: absolute;
  top: 50%;
  left: calc(100% + 50px);
  transform: translateY(-50%);
  background: var(--color-bg-dark);
  border: 3px solid var(--color-accent);
  border-radius: 8px;
  padding: 1rem;
  z-index: 1200;
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.7);
}

.discard-viewer.hidden {
  display: none;
}

.discard-viewer-content {
  display: grid;
  grid-template-columns: repeat(6, 1fr);
  gap: 0.5rem;
  padding: 0.5rem;
}

/* Quarter-size cards for viewer */
.discard-viewer .mini-card {
  width: 40px;
  height: 56px;
  border-radius: 4px;
  border: 1.5px solid #000;
  background: var(--color-card-face);
  color: #000;
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: bold;
  font-size: 0.7rem;
  user-select: none;
}

.discard-viewer .mini-card.suit-s,
.discard-viewer .mini-card.suit-c {
  color: #000;
}

.discard-viewer .mini-card.suit-h,
.discard-viewer .mini-card.suit-d {
  color: var(--color-card-red);
}

/* Cards */
.card {
  width: 70px;
  height: 100px;
  border-radius: 6px;
  border: 2px solid #000;
  background: var(--color-card-face);
  color: #000;
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: bold;
  font-size: 1.2rem;
  cursor: pointer;
  transition: transform 0.1s, box-shadow 0.1s;
  user-select: none;
  position: relative;
}

.card:hover {
  transform: translateY(-5px);
  box-shadow: 0 4px 8px rgba(0, 0, 0, 0.3);
}

.card.card-back {
  background: linear-gradient(135deg, var(--color-card-back-start) 0%, var(--color-card-back-end) 100%);
  color: white;
  cursor: pointer;
}

.card.card-back span {
  font-size: 0.8rem;
  text-align: center;
}

.card.selected {
  transform: translateY(-10px);
  border-color: var(--color-warning);
  box-shadow: 0 0 10px var(--color-warning);
}

.card.disabled {
  opacity: 0.5;
  cursor: not-allowed;
}

.card.disabled:hover {
  box-shadow: none;
}

/* Suit colors */
.card.suit-s,
.card.suit-c {
  color: #000;
}

.card.suit-h,
.card.suit-d {
  color: var(--color-card-red);
}

/* Layoff indicator */
.card.layoff {
  border-color: var(--color-success);
}

.card.layoff::before {
  content: '[';
  position: absolute;
  left: 2px;
  top: 2px;
  font-size: 1rem;
  color: var(--color-success);
}

.card.layoff::after {
  content: ']';
  position: absolute;
  right: 2px;
  bottom: 2px;
  font-size: 1rem;
  color: var(--color-success);
}

/* Player area */
#player-area {
  background: var(--color-bg-medium);
  padding: 1rem;
  border-radius: 6px;
  display: flex;
  flex-direction: column;
  gap: 1rem;
}

#player-upgrades {
  font-size: 1rem;
  display: flex;
  flex-wrap: wrap;
  justify-content: center;
  align-items: center;
  gap: 0.25rem;
}

.upgrade-badge {
  display: inline-block;
  background: var(--color-bg-darkest);
  color: var(--color-text-primary);
  border: 2px solid var(--color-bg-winner);
  padding: 0.25rem 0.5rem;
  border-radius: 4px;
  cursor: help;
  font-weight: 500;
  transition: border-color 0.2s;
}

.upgrade-badge.combo-ready {
  border-color: var(--color-success);
}

.upgrade-badge.upgrade-used {
  opacity: 0.4;
  filter: grayscale(0.8);
}

#player-hand {
  display: flex;
  gap: 6px;
  flex-wrap: wrap;
  min-height: 100px;
  justify-content: center;
}

.player-melds-section {
  margin-top: 1rem;
}

.player-melds-section h4 {
  font-size: 0.9rem;
  margin-bottom: 0.5rem;
  color: var(--color-accent);
}

/* Actions */
#action-buttons-wrapper {
  display: grid;
  grid-template-columns: 1fr auto 1fr;
  align-items: center;
  gap: 1rem;
}

.actions-left {
  display: flex;
  gap: 1rem;
  justify-content: flex-end;
}

.actions-center {
  display: flex;
  justify-content: center;
}

.actions-right {
  display: flex;
  gap: 1rem;
  justify-content: flex-start;
}

button {
  background: var(--color-accent);
  color: white;
  border: none;
  padding: 0.75rem 1.5rem;
  border-radius: 6px;
  font-size: 1rem;
  cursor: pointer;
  transition: background 0.2s;
}

button:hover:not(:disabled) {
  background: var(--color-accent-hover);
}

button:disabled {
  background: var(--color-bg-disabled);
  cursor: not-allowed;
  opacity: 0.6;
}

button#btn-meld,
button#btn-layoff {
  background: var(--color-success);
}

button#btn-meld:hover:not(:disabled),
button#btn-layoff:hover:not(:disabled) {
  background: var(--color-success-hover);
}

button#btn-sort-rank,
button#btn-sort-suit {
  background: var(--color-sort-btn);
}

button#btn-sort-rank:hover,
button#btn-sort-suit:hover {
  background: var(--color-sort-btn-hover);
}

/* Turn Info next to piles */
#turn-info {
  background: var(--color-bg-medium);
  padding: 0.75rem 1rem;
  border-radius: 6px;
  min-width: 200px;
  align-self: center;
  justify-self: start;
}

#turn-info h3 {
  font-size: 0.9rem;
  margin-bottom: 0.5rem;
  color: var(--color-accent);
}

#turn-info p {
  margin-bottom: 0.25rem;
  line-height: 1.4;
  font-size: 0.85rem;
}

#current-player {
  font-weight: bold;
  color: var(--color-success);
}

/* Modals */
.modal {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: rgba(0, 0, 0, 0.8);
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 1000;
  border-radius: 8px;
}

.modal.hidden {
  display: none;
}

.modal-content {
  background: var(--color-bg-dark);
  padding: 2rem;
  border-radius: 12px;
  max-width: 900px;
  max-height: 80vh;
  overflow-y: auto;
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.5);
}

.modal-content h2 {
  color: var(--color-accent);
  margin-bottom: 1.5rem;
  text-align: center;
}

/* Round end layout with chart */
.round-end-layout {
  display: grid;
  grid-template-columns: 1fr 1.2fr;
  gap: 2rem;
  align-items: start;
}

.score-chart-container {
  background: var(--color-bg-medium);
  padding: 1rem;
  border-radius: 8px;
  border: 2px solid var(--color-border);
}

.standings-section {
  margin-top: 1.5rem;
  padding-top: 1.5rem;
  border-top: 2px solid var(--color-border);
}

/* Reference button */
#reference-button-wrapper {
  text-align: center;
  margin-top: 0.5rem;
}

#btn-reference {
  background: var(--color-bg-medium);
  color: var(--color-text-primary);
  border: 2px solid var(--color-border);
  padding: 0.5rem 1.5rem;
  border-radius: 6px;
  font-size: 0.9rem;
  cursor: pointer;
  transition: all 0.2s;
}

#btn-reference:hover {
  background: var(--color-bg-light);
  border-color: var(--color-accent);
}

/* Reference modal */
.reference-content {
  max-width: 700px;
  width: 700px;
  max-height: 80vh;
  overflow: hidden;
  display: flex;
  flex-direction: column;
  border-radius: 12px;
}

.close-button {
  position: absolute;
  top: 0.5rem;
  left: 0.5rem;
  background: var(--color-bg-dark);
  border: 2px solid var(--color-border);
  color: var(--color-text-secondary);
  font-size: 1.5rem;
  cursor: pointer;
  width: 2.5rem;
  height: 2.5rem;
  display: flex;
  align-items: center;
  justify-content: center;
  border-radius: 6px;
  transition: all 0.2s;
  z-index: 10;
}

.close-button:hover {
  background: var(--color-accent);
  border-color: var(--color-accent);
  color: var(--color-card-face);
}

#reference-page-content {
  flex: 1;
  overflow-y: auto;
  margin-bottom: 1rem;
  padding-right: 1rem;
  line-height: 1.6;
}

#reference-page-content h2 {
  color: var(--color-accent);
  margin-bottom: 1.5rem;
  padding-bottom: 0.5rem;
  border-bottom: 2px solid var(--color-border);
}

#reference-page-content h3 {
  color: var(--color-warning);
  margin-top: 1.5rem;
  margin-bottom: 0.75rem;
}

#reference-page-content h4 {
  color: var(--color-success);
  margin-top: 1rem;
  margin-bottom: 0.5rem;
}

#reference-page-content ul,
#reference-page-content ol {
  margin-left: 1.5rem;
  margin-bottom: 1rem;
}

#reference-page-content li {
  margin-bottom: 0.5rem;
}

#reference-page-content pre {
  background: var(--color-bg-medium);
  padding: 1rem;
  border-radius: 6px;
  overflow-x: auto;
  margin: 1rem 0;
  font-size: 0.9rem;
  line-height: 1.4;
}

.reference-nav {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding-top: 1rem;
  border-top: 2px solid var(--color-border);
  flex-shrink: 0;
}

.reference-nav button {
  padding: 0.5rem 1rem;
  background: var(--color-bg-medium);
  border: 2px solid var(--color-border);
  color: var(--color-text-primary);
  border-radius: 6px;
  cursor: pointer;
  transition: all 0.2s;
}

.reference-nav button:hover:not(:disabled) {
  background: var(--color-accent);
  border-color: var(--color-accent);
  color: var(--color-card-face);
}

.reference-nav button:disabled {
  opacity: 0.4;
  cursor: not-allowed;
}

#page-indicator {
  color: var(--color-text-secondary);
  font-size: 0.9rem;
}

/* Upgrade choices */
#upgrade-choices {
  display: flex;
  flex-direction: column;
  gap: 1rem;
}

.upgrade-option {
  background: var(--color-bg-medium);
  padding: 1rem;
  border-radius: 6px;
  cursor: pointer;
  border: 2px solid transparent;
  transition: border-color 0.2s, background 0.2s;
}

.upgrade-option:hover {
  background: var(--color-bg-medium-hover);
  border-color: var(--color-success);
}

.upgrade-option h3 {
  color: var(--color-accent);
  margin-bottom: 0.5rem;
  font-size: 1.1rem;
}

.upgrade-option p {
  margin-bottom: 0.25rem;
  line-height: 1.4;
}

.upgrade-option .upgrade-tooltip {
  font-size: 0.85rem;
  color: var(--color-text-secondary);
  font-style: italic;
}

/* Round end report */
#round-end-report,
#game-end-report {
  margin-bottom: 1.5rem;
}

.report-table {
  width: 100%;
  border-collapse: collapse;
  margin-top: 1rem;
  font-size: 0.9rem;
}

.report-table th,
.report-table td {
  padding: 0.5rem;
  text-align: left;
  border-bottom: 1px solid var(--color-bg-medium);
  vertical-align: middle;
}

.report-table th {
  color: var(--color-accent);
  font-weight: bold;
}

.report-table th[title] {
  cursor: help;
}

.report-table th[title] *,
.report-table td[title] * {
  pointer-events: none;
}

.report-table tr:hover {
  background: var(--color-bg-medium);
}

.winner-row {
  background: var(--color-bg-winner) !important;
  font-weight: bold;
}

.winner-col {
  color: var(--color-warning);
  font-weight: bold;
}

/* Scrollbar styling */
::-webkit-scrollbar {
  width: 8px;
  height: 8px;
}

::-webkit-scrollbar-track {
  background: var(--color-bg-medium);
}

::-webkit-scrollbar-thumb {
  background: var(--color-success);
  border-radius: 4px;
}

::-webkit-scrollbar-thumb:hover {
  background: var(--color-success-hover);
}

/* Responsive */
@media (max-width: 1200px) {
  main {
    grid-template-columns: 200px 1fr 200px;
  }
}

@media (max-width: 900px) {
  main {
    grid-template-columns: 1fr;
    grid-template-rows: auto 1fr auto;
  }

  #game-log-panel,
  #info-panel {
    max-height: 150px;
  }
}
